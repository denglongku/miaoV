<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>QQ列表展开收缩</title>
<style>
/*清除默认样式*/
body,ul,h2{margin:0; padding:0;}
li{list-style:none;}

#list{width:200px; border:#06F 1px solid; margin:10px auto;}
#list h2{height:30px; line-height:30px; background:#FF9 url(img/ico1.gif) no-repeat 8px 13px; font-size:20px; text-indent:1em; cursor:pointer;}
#list ul{display:none;}
#list ul li{border-bottom:1px solid #9FC; text-indent:1.3em; cursor:pointer;}
#list .active{background:#6FF url(img/ico2.gif) no-repeat 8px 13px;}
#list .highlight{background:#9FC;}

</style>
<script>
window.onload = function(){
	var oUl = document.getElementById('list');
	var aH2 = oUl.getElementsByTagName('h2');
	var aUl = oUl.getElementsByTagName('ul');
	var aLi = null;
	var arrLi = [];
	
	//清除所有H2的class，所有UL的display为none
	function fnTab(){
		for(var i=0;i<aH2.length;i++){
			aH2[i].className = '';
			aUl[i].style.display = 'none';
			}
		}
	//实现H2的点击展开收缩
	for(var i=0;i<aH2.length;i++){
		aH2[i].index = i;
		aH2[i].onclick = function(){
			if(this.className===''){
				fnTab();
				aUl[this.index].style.display = 'block';
				this.className = 'active';
			
			}else{
				aUl[this.index].style.display = 'none';
				this.className = '';
			}
		}
	}
	//获取最里层的li,并全部存于arrLi[]数组中
		for(var i=0;i<aUl.length;i++){
			aLi = aUl[i].getElementsByTagName('li');
			for(var j=0;j<aLi.length;j++){
			      arrLi.push(aLi[j]);
				}
			}
		//实现里面li的点击高亮	
	   for(var i=0;i<arrLi.length;i++){
		   arrLi[i].onclick = function(){
			   for(var i=0;i<arrLi.length;i++){
				   arrLi[i].className = '';
				   this.className = 'highlight';
				   }
			   }
	  }

};
</script>
</head>

<body>
<ul id="list">
    <li>
        <h2 >我的好友</h2>
        <ul>
            <li >张三</li>
            <li>李四</li>
            <li>王五</li>
            <li>赵柳</li>
            <li>罗去</li>
        </ul>
    </li>
    <li>
        <h2>企业好友</h2>
        <ul>
            <li>杨哦</li>
            <li>吴看</li>
            <li>卓看</li>
            <li>王三</li>
            <li>尚一</li>
        </ul>
    </li>
    <li>
        <h2>我的黑名单</h2>
        <ul>
            <li>习看</li>
            <li>五仁</li>
            <li>岳斌</li>
            <li>李绅</li>
        </ul>
    </li>
</ul>

</body>
</html>
