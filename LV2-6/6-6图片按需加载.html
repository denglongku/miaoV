<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>6-6图片按需加载</title>
<style>
body{margin:0; padding:0;}

ul{margin:100px auto; padding:0;}
li{float:left; list-style:none; margin:0  0 10px 10px ;}
img{width:290px; height:200px;display:block; border:1px solid #06F;}

</style>

   
<script>
window.onload = function(){
    var oUl = document.getElementById('ul1');
	var aImg = oUl.getElementsByTagName('img');
	
	//初始化
	showImage();
	
	//滚动条事件
	window.onscroll = showImage;
	
	//封装函数，显示图片
	function showImage(){
	   var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
	   for(var i=0;i<aImg.length;i++){
		  if( !aImg[i].isLoad && getTop(aImg[i]) < scrollTop + document.documentElement.clientHeight ){
			  aImg[i].src = aImg[i].getAttribute('_src');
			  aImg[i].isLoad = true; //表示已经加载过了，避免重复加载
		   } 
	   }	
	}
	
	//封装函数，获取obj到页面顶部的top值
	function getTop(obj){
		var iTop = 0;
		while(obj){
		    iTop += obj.offsetTop;
			obj = obj.offsetParent;	
	    }
		return iTop;
    }
	
}
</script>
</head>

<body >

<ul id="ul1">
<!--将图片地址存放在自定义属性中 _src -->
<li><img _src="img/1.gif"  src="img/white.JPG"/></li>
<li><img _src="img/1.jpg" src="img/white.JPG"/></li>
<li><img _src="img/2.gif" src="img/white.JPG"/></li>
<li><img _src="img/2.jpg" src="img/white.JPG"/></li>
<li><img _src="img/3.jpg" src="img/white.JPG"/></li>
<li><img _src="img/4.jpg" src="img/white.JPG"/></li>
<li><img _src="img/5.jpg" src="img/white.JPG"/></li>
<li><img _src="img/7.jpg" src="img/white.JPG"/></li>
<li><img _src="img/55.jpg" src="img/white.JPG"/></li>
<li><img _src="img/590.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/1.gif"  src="img/white.JPG"/></li>
<li><img _src="img/1.jpg" src="img/white.JPG"/></li>
<li><img _src="img/2.gif" src="img/white.JPG"/></li>
<li><img _src="img/2.jpg" src="img/white.JPG"/></li>
<li><img _src="img/3.jpg" src="img/white.JPG"/></li>
<li><img _src="img/4.jpg" src="img/white.JPG"/></li>
<li><img _src="img/5.jpg" src="img/white.JPG"/></li>
<li><img _src="img/7.jpg" src="img/white.JPG"/></li>
<li><img _src="img/55.jpg" src="img/white.JPG"/></li>
<li><img _src="img/590.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/1.gif"  src="img/white.JPG"/></li>
<li><img _src="img/1.jpg" src="img/white.JPG"/></li>
<li><img _src="img/2.gif" src="img/white.JPG"/></li>
<li><img _src="img/2.jpg" src="img/white.JPG"/></li>
<li><img _src="img/3.jpg" src="img/white.JPG"/></li>
<li><img _src="img/4.jpg" src="img/white.JPG"/></li>
<li><img _src="img/5.jpg" src="img/white.JPG"/></li>
<li><img _src="img/7.jpg" src="img/white.JPG"/></li>
<li><img _src="img/55.jpg" src="img/white.JPG"/></li>
<li><img _src="img/590.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/1.gif"  src="img/white.JPG"/></li>
<li><img _src="img/1.jpg" src="img/white.JPG"/></li>
<li><img _src="img/2.gif" src="img/white.JPG"/></li>
<li><img _src="img/2.jpg" src="img/white.JPG"/></li>
<li><img _src="img/3.jpg" src="img/white.JPG"/></li>
<li><img _src="img/4.jpg" src="img/white.JPG"/></li>
<li><img _src="img/5.jpg" src="img/white.JPG"/></li>
<li><img _src="img/7.jpg" src="img/white.JPG"/></li>
<li><img _src="img/55.jpg" src="img/white.JPG"/></li>
<li><img _src="img/590.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/1.gif"  src="img/white.JPG"/></li>
<li><img _src="img/1.jpg" src="img/white.JPG"/></li>
<li><img _src="img/2.gif" src="img/white.JPG"/></li>
<li><img _src="img/2.jpg" src="img/white.JPG"/></li>
<li><img _src="img/3.jpg" src="img/white.JPG"/></li>
<li><img _src="img/4.jpg" src="img/white.JPG"/></li>
<li><img _src="img/5.jpg" src="img/white.JPG"/></li>
<li><img _src="img/7.jpg" src="img/white.JPG"/></li>
<li><img _src="img/55.jpg" src="img/white.JPG"/></li>
<li><img _src="img/590.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/1.gif"  src="img/white.JPG"/></li>
<li><img _src="img/1.jpg" src="img/white.JPG"/></li>
<li><img _src="img/2.gif" src="img/white.JPG"/></li>
<li><img _src="img/2.jpg" src="img/white.JPG"/></li>
<li><img _src="img/3.jpg" src="img/white.JPG"/></li>
<li><img _src="img/4.jpg" src="img/white.JPG"/></li>
<li><img _src="img/5.jpg" src="img/white.JPG"/></li>
<li><img _src="img/7.jpg" src="img/white.JPG"/></li>
<li><img _src="img/55.jpg" src="img/white.JPG"/></li>
<li><img _src="img/590.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/1.gif"  src="img/white.JPG"/></li>
<li><img _src="img/1.jpg" src="img/white.JPG"/></li>
<li><img _src="img/2.gif" src="img/white.JPG"/></li>
<li><img _src="img/2.jpg" src="img/white.JPG"/></li>
<li><img _src="img/3.jpg" src="img/white.JPG"/></li>
<li><img _src="img/4.jpg" src="img/white.JPG"/></li>
<li><img _src="img/5.jpg" src="img/white.JPG"/></li>
<li><img _src="img/7.jpg" src="img/white.JPG"/></li>
<li><img _src="img/55.jpg" src="img/white.JPG"/></li>
<li><img _src="img/590.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/1.gif"  src="img/white.JPG"/></li>
<li><img _src="img/1.jpg" src="img/white.JPG"/></li>
<li><img _src="img/2.gif" src="img/white.JPG"/></li>
<li><img _src="img/2.jpg" src="img/white.JPG"/></li>
<li><img _src="img/3.jpg" src="img/white.JPG"/></li>
<li><img _src="img/4.jpg" src="img/white.JPG"/></li>
<li><img _src="img/5.jpg" src="img/white.JPG"/></li>
<li><img _src="img/7.jpg" src="img/white.JPG"/></li>
<li><img _src="img/55.jpg" src="img/white.JPG"/></li>
<li><img _src="img/590.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>
<li><img _src="img/999.jpg" src="img/white.JPG"/></li>


</ul>
</body>
</html>
